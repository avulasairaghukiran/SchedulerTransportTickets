const SampleData = [
    {
        id: 'e20df4ab-5a62-41c8-97fa-c1924c543937',
        label: {
            title: 'Prexa User 2',
            icon: '',
            subtitle: '',
        },
        data: [
            {
                id: '99bff130-2912-ef11-9f89-002248d59327',
                startDate: '2024-05-14T19:35:45.000Z',
                endDate: '2024-05-15T12:00:00.000Z',
                occupancy: 4000,
                title: 'Change',
                bgColor: 'rgb(40, 167, 69)',
                jobstatus: 'Completed',
                labourcosthr: 5,
                labourhours: 1,
                startFormatDate: '5/15/2024 1:05 AM',
                endFormatedEstimatedDate: '5/15/2024 5:30 PM',
            },
            {
                id: '6286dce9-f632-ee11-bdf4-000d3a0a2267',
                startDate: '2023-08-04T18:43:42.000Z',
                endDate: '2023-08-04T20:00:00.000Z',
                occupancy: 4000,
                title: 'ENGINE SERVICE',
                bgColor: 'rgb(21, 180, 191)',
                jobstatus: 'New',
                startFormatDate: '8/5/2023 12:13 AM',
                endFormatedEstimatedDate: '8/5/2023 1:30 AM',
            },
        ],
    },
    {
        id: '04f37a23-6e49-489f-8cd0-f63eabc6058a',
        label: {
            title: 'Prexa Trial',
            icon: '',
            subtitle: '',
        },
        data: [
            {
                id: '848a4a9b-666f-ef11-a670-6045bdf9cd4f',
                startDate: '2024-09-11T19:30:33.000Z',
                endDate: '2024-09-16T02:30:00.000Z',
                occupancy: 4000,
                title: 'Good',
                bgColor: 'rgb(21, 132, 191)',
                jobstatus: 'Work In Progress',
                estimatedcost: 50,
                labourhours: 5,
                startFormatDate: '9/12/2024 1:00 AM',
                endFormatedEstimatedDate: '9/16/2024 8:00 AM',
            },
            {
                id: 'd6b70ca7-676f-ef11-a670-6045bdf9cd4f',
                startDate: '2024-08-26T11:27:07.000Z',
                endDate: '2024-08-28T02:30:00.000Z',
                occupancy: 4000,
                title: 'New',
                bgColor: 'rgb(21, 180, 191)',
                jobstatus: 'New',
                startFormatDate: '8/26/2024 4:57 PM',
                endFormatedEstimatedDate: '8/28/2024 8:00 AM',
            },
            {
                id: '067efad2-4070-ef11-a670-6045bdf9cd4f',
                startDate: '2024-08-23T19:30:39.000Z',
                endDate: '2024-08-23T21:30:00.000Z',
                occupancy: 4000,
                title: 'New Job',
                bgColor: 'rgb(40, 167, 69)',
                jobstatus: 'Completed',
                startFormatDate: '8/24/2024 1:00 AM',
                endFormatedEstimatedDate: '8/24/2024 3:00 AM',
            },
            {
                id: '0211872f-666f-ef11-a670-6045bdf9cd4f',
                startDate: '2024-09-14T11:16:33.000Z',
                endDate: '2024-09-17T02:30:00.000Z',
                occupancy: 4000,
                title: 'Nice',
                bgColor: 'rgb(40, 167, 69)',
                jobstatus: 'Completed',
                estimatedcost: 110,
                labourcosthr: 10,
                labourhours: 10,
                startFormatDate: '9/14/2024 4:46 PM',
                endFormatedEstimatedDate: '9/17/2024 8:00 AM',
            },
            {
                id: 'c1fe365e-666f-ef11-a670-6045bdf9cd4f',
                startDate: '2024-09-16T18:30:36.000Z',
                endDate: '2024-09-18T17:30:00.000Z',
                occupancy: 4000,
                title: 'Nice 1',
                bgColor: 'rgb(253, 126, 20)',
                jobstatus: 'On Hold',
                estimatedcost: 100,
                labourcosthr: 14,
                labourhours: 5,
                startFormatDate: '9/17/2024 12:00 AM',
                endFormatedEstimatedDate: '9/18/2024 11:00 PM',
            },
            {
                id: '75631125-2065-ef11-a671-0022486d99a6',
                startDate: '2024-08-28T08:00:14.000Z',
                endDate: '2024-08-29T09:30:00.000Z',
                occupancy: 4000,
                title: 'Prexa Job 1',
                bgColor: 'rgb(21, 132, 191)',
                jobstatus: 'Work In Progress',
                estimatedcost: 100,
                labourcosthr: 8,
                labourhours: 10,
                startFormatDate: '8/28/2024 1:30 PM',
                endFormatedEstimatedDate: '8/29/2024 3:00 PM',
            },
            {
                id: '0982ea33-2065-ef11-a671-0022486d99a6',
                startDate: '2024-09-03T09:30:28.000Z',
                endDate: '2024-09-05T02:30:00.000Z',
                occupancy: 4000,
                title: 'Prexa Job 2',
                bgColor: 'rgb(21, 180, 191)',
                jobstatus: 'New',
                labourcosthr: 10,
                labourhours: 5,
                startFormatDate: '9/3/2024 3:00 PM',
                endFormatedEstimatedDate: '9/5/2024 8:00 AM',
            },
            {
                id: '8fc9d740-2065-ef11-a671-0022486d99a6',
                startDate: '2024-08-27T09:30:49.000Z',
                endDate: '2024-08-30T02:30:00.000Z',
                occupancy: 4000,
                title: 'Prexa Job 3',
                bgColor: 'rgb(220, 53, 53)',
                jobstatus: 'Cancelled',
                startFormatDate: '8/27/2024 3:00 PM',
                endFormatedEstimatedDate: '8/30/2024 8:00 AM',
            },
            {
                id: '52f2eb68-e070-ef11-a670-000d3a09c8c5',
                startDate: '2024-08-25T06:30:24.000Z',
                endDate: '2024-08-25T16:00:00.000Z',
                occupancy: 4000,
                title: 'Sai',
                bgColor: 'rgb(21, 180, 191)',
                jobstatus: 'New',
                estimatedcost: 700,
                labourhours: 10,
                startFormatDate: '8/25/2024 12:00 PM',
                endFormatedEstimatedDate: '8/25/2024 9:30 PM',
            },
            {
                id: '197750b0-9a6e-ef11-a670-6045bdf9cd4f',
                startDate: '2024-09-17T18:30:33.000Z',
                endDate: '2024-09-18T18:30:00.000Z',
                occupancy: 4000,
                title: 'Sample',
                bgColor: 'rgb(21, 180, 191)',
                jobstatus: 'New',
                estimatedcost: 300,
                labourcosthr: 14,
                labourhours: 20,
                startFormatDate: '9/18/2024 12:00 AM',
                endFormatedEstimatedDate: '9/19/2024 12:00 AM',
            },
        ],
    },
]



function filterSampleData(data, conditions) {
  // Helper function to safely parse dates
  const parseDate = (dateString) => {
    if (!dateString) return null;
    const date = new Date(dateString);
    return isNaN(date.getTime()) ? null : date;
  };

  // Helper function to compare values dynamically
  const compareValues = (value, condition) => {
    if (condition === undefined || condition === '') return true;
    const numValue = Number(value);
    const numCondition = Number(condition);
    if (isNaN(numValue) || isNaN(numCondition)) return true;
    return numValue >= numCondition;
  };

  return data.map(item => ({
    ...item,
    data: item.data.filter(job => {
      return Object.entries(conditions).every(([key, value]) => {
        switch (key) {
          case 'StartDate':
            return !value || parseDate(job.startDate) >= parseDate(value);
          case 'EndDate':
            return !value || parseDate(job.endDate) <= parseDate(value);
          case 'JobStatus':
            return !value || value.length === 0 || value.includes(job.jobstatus);
          case 'minEstimatedCost':
            return compareValues(job.estimatedcost, value);
          case 'maxEstimatedCost':
            return compareValues(value, job.estimatedcost);
          case 'minLabourChargesPerHour':
            return compareValues(job.labourcosthr, value);
          case 'maxLabourChargesPerHour':
            return compareValues(value, job.labourcosthr);
          case 'minLabourHours':
            return compareValues(job.labourhours, value);
          case 'maxLabourHours':
            return compareValues(value, job.labourhours);
          default:
            return true; // Ignore unknown conditions
        }
      });
    })
  })).filter(item => item.data.length > 0);
}

// Example usage:
const filteredData = filterSampleData(SampleData, {
  StartDate: '2024-08-01',
  EndDate: '2024-09-30',
  JobStatus: [],
  minEstimatedCost: 0,
  maxEstimatedCost: 100,
  minLabourChargesPerHour: 0,
  maxLabourChargesPerHour: 100,
  minLabourHours: 0,
  maxLabourHours: 100
});

console.log(JSON.stringify(filteredData, null, 2));